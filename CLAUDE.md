# CLAUDE.md - Project Intelligence for turbo-flow-claude

> Auto-generated by generate-claude-md.sh v1.1.0 on 2026-02-04 15:11:13
> Regenerate with: `./devpods/generate-claude-md.sh` or `generate-claude-md`

---

## Project Overview

| Attribute | Value |
|-----------|-------|
| **Name** | turbo-flow-claude |
| **Type** | unknown |
| **Package Manager** | unknown |
| **Frameworks** | none detected |
| **CI/CD** | none detected |
| **Containers** | devcontainer |
| **Git** | branch: main, remote: https://github.com/Agentist-Elder/turbo-flow-claude |
| **Claude Flow Context** | ❌ Not found |
| **Spec-Kit** | ❌ Not initialized |

---

## Spec-Kit Specifications

> **Note:** Spec-kit is not initialized. Run `sk-here` or `specify init . --ai claude` to enable spec-driven development.

---

## Project Structure

```
.
agentdb-rust-prime
agentdb-rust-prime/devpods
agentdb-rust-prime/node_modules
agentdb-rust-prime/scripts
agentdb-rust-prime/src
agentdb-rust-prime/target
devpods
devpods/additional-agents
devpods/context
devpods/devcontainer_files
devpods/scripts
devpods/templates
```

Key directories: minimal structure

---

## Development Commands

### Quick Reference

```bash
# CLI (claude-flow / ruv)
ruv --version                        # Verify CLI install
ruv init                             # Initialize claude-flow in project
ruv start                            # Start orchestration system
ruv status                           # Show system status
ruv security scan                    # Run security scan
ruv swarm status                     # Check swarm health

# Testing
npx vitest run                       # Run all stable tests
npx vitest run tests/security/       # Run security unit tests only
npx vitest run tests/swarm/          # Run swarm tests only

# Integration tests (require live MCP daemon — `ruv start` first)
npx vitest run --config vitest.integration.config.ts
```

---

## Coding Guidelines

### General Principles

1. **Clarity over cleverness** - Write code that is easy to understand
2. **Consistent formatting** - Follow the project's established style
3. **Meaningful names** - Use descriptive variable and function names
4. **Small functions** - Keep functions focused on a single task
5. **Test coverage** - Write tests for new functionality

### MCP Transport Error Policy

The 6-Layer AIDefence stack uses two distinct call paths through `src/security/mcp-transport.ts`:

- **`callTool`** (L3 Safety Gate): Zero retries, fail-CLOSED. If the MCP call fails, the error propagates immediately to the coordinator which blocks the request. This is intentional — a broken safety gate must never silently pass traffic.
- **`callToolWithRetry`** (L1/L2/L4): Exponential backoff with 2 retries (200ms base, 2s cap). Transient failures are tolerated because these layers are fail-open.
- **Circuit Breaker**: After 5 consecutive failures on any layer, ALL MCP calls are blocked for 30s. This defends against cascading exploitation via compromised MCP servers (ref: Hexstrike/APT31, GTIG Feb 2026).

### File Organization

- Keep related code together
- Use index files for clean exports
- Separate concerns (logic, UI, data)
- Follow the existing project structure

### Commit Guidelines

- Use conventional commits: `feat:`, `fix:`, `docs:`, `refactor:`, `test:`
- Keep commits focused and atomic
- Write clear commit messages

---

## Instructions for Claude

### When Working on This Project

1. **Read specs first** - Check `.specify/` for project specifications before making changes
2. **Follow existing patterns** - Match the code style and architecture already in place
3. **Run tests** - Verify changes don't break existing functionality
4. **Update docs** - Keep documentation in sync with code changes
5. **Small PRs** - Make incremental changes that are easy to review

### Preferred Approaches

- Use TypeScript/type hints when available
- Prefer async/await over callbacks
- Use early returns to reduce nesting
- Extract reusable logic into utility functions
- Add comments for complex business logic

### Things to Avoid

- Don't modify generated files directly
- Don't commit sensitive data or API keys
- Don't add unnecessary dependencies
- Don't skip error handling
- Don't ignore linter warnings

---

## Available MCP Tools

If running in Turbo-Flow environment, these MCP servers are available:

| Tool | Usage | Description |
|------|-------|-------------|
| Playwright | Browser automation | Automated testing and web scraping |
| Chrome DevTools | DOM inspection | Debug and inspect web pages |
| n8n | Workflow automation | Build and run n8n workflows |
| PAL | Multi-model AI | Query Gemini, GPT, Grok, Ollama |

### Using MCP Tools

```
# In Claude, you can use:
"Use playwright to test the login flow"
"Use chrome devtools to inspect the DOM"
"Use pal to get Gemini's opinion on this approach"
```

---

## Regenerating This File

This file is auto-generated based on project analysis. To regenerate:

```bash
# Using the script
./devpods/generate-claude-md.sh

# Using the alias (if Turbo-Flow is installed)
generate-claude-md

# With custom output location
./devpods/generate-claude-md.sh -o docs/CLAUDE.md

# Force overwrite without prompts
./devpods/generate-claude-md.sh -f

# Verbose mode
./devpods/generate-claude-md.sh -v
```

### What Gets Analyzed

- `.claude-flow/CLAUDE.flow.md` - Claude Flow generated context (backed up from original CLAUDE.md)
- `.specify/` - Spec-kit specifications
- `package.json` / `pyproject.toml` / `Cargo.toml` - Project configuration
- Directory structure - Project organization
- CI/CD configuration - Deployment setup
- Container configuration - Docker/DevPod setup

### Claude Flow Integration

If Claude Flow has generated a `CLAUDE.md` file:
1. It is automatically detected and backed up to `.claude-flow/CLAUDE.flow.md`
2. Its content is incorporated into the "Claude Flow Context" section above
3. The original insights are preserved while adding project analysis

---

*Generated by [Turbo-Flow Claude](https://github.com/marcuspat/turbo-flow-claude)*
